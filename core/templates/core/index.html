{% extends "base.html" %}
{% load static %}
{% block title %}{{ bio.full_name|default:'Portfolio' }}{% if bio.job_title %} - {{ bio.job_title }}{% endif %}{% endblock %}

{% block content %}
<div class="container">
    <!-- Bio Section -->
    <section class="about-section">
        <h1 class="main-heading">Portfolio</h1>
        <div class="about-content">
            <div class="about-text">
                <!-- Bio Section -->
                <div class="bio-section">
                    <div class="bio-info">
                        <h3 class="full-name">{{ bio.full_name|default:"Your Name" }}</h3>
                        <p class="job-title">{{ bio.job_title|default:"Job Title" }}</p>
                        <p class="intro-text">
                            {{ bio.description|default:"Write a professional description in the admin panel." }}
                        </p>
                    </div>
                </div>
                
                <!-- Contact Section -->
                <div class="contact-section">
                    <h2 class="section-title">Contact</h2>
                    <div class="contact-list">
                        {% if bio.email %}
                        <div class="contact-item" onclick="window.location.href='mailto:{{ bio.email }}'">
                            <i class="fas fa-envelope"></i>
                            <span>{{ bio.email }}</span>
                        </div>
                        {% endif %}
                        {% if bio.phone %}
                        <div class="contact-item" onclick="window.location.href='tel:{{ bio.phone }}'">
                            <i class="fas fa-phone"></i>
                            <span>{{ bio.phone }}</span>
                        </div>
                        {% endif %}
                        {% if bio.linkedin %}
                        <div class="contact-item" onclick="window.open('{{ bio.linkedin }}', '_blank')">
                            <i class="fab fa-linkedin"></i>
                            <span>{{ bio.linkedin }}</span>
                        </div>
                        {% endif %}
                        {% if bio.github %}
                        <div class="contact-item" onclick="window.open('{{ bio.github }}', '_blank')">
                            <i class="fab fa-github"></i>
                            <span>{{ bio.github }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Portrait -->
            <div class="portrait-wrapper">
                <div class="portrait-frame">
                    <div class="portrait-glow"></div>
                    {% if bio.profile_picture %}
                        <img src="{{ bio.profile_picture.url }}" alt="{{ bio.full_name }}" class="portrait-img">
                    {% else %}
                        <img src="{% static 'images/default-avatar.svg' %}" alt="{{ bio.full_name|default:'Profile' }}" class="portrait-img">
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Section - Two Columns -->
    <section class="bottom-section">
        <!-- Left Column -->
        <div class="left-column">
            <!-- Education Section -->
            <div class="card education-card">
                <div class="card-content">
                    <h3 class="card-title">Education</h3>
                    {% for edu in educations %}
                        <div class="education-year">{% if edu.duration %}{{ edu.duration }}{% else %}{% if edu.start_date %}{{ edu.start_date|date:"Y" }}{% endif %}{% if edu.end_date %} - {{ edu.end_date|date:"Y" }}{% endif %}{% endif %}</div>
                        <div class="education-details">{{ edu.degree }}</div>
                        <div class="education-institution">{{ edu.institution }}</div>
                        {% if edu.description %}
                        <div class="education-note">{{ edu.description }}</div>
                        {% endif %}
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p class="education-note">No education entries yet. Add them via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Experience Section -->
            <div class="card experience-card">
                <div class="card-content">
                    <h3 class="card-title">Experience</h3>
                    {% for exp in experiences %}
                        <div class="experience-item">
                            <div class="experience-year">{% if exp.duration %}{{ exp.duration }}{% else %}{% if exp.start_date %}{{ exp.start_date|date:"Y" }}{% endif %}{% if exp.end_date %} - {{ exp.end_date|date:"Y" }}{% endif %}{% endif %}</div>
                            <div class="experience-role">{{ exp.title }}</div>
                            {% if exp.description %}
                            <div class="experience-desc">{{ exp.description }}</div>
                            {% endif %}
                        </div>
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p>No experience items yet. Add them via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Projects Section -->
            <div class="card projects-card">
                <div class="card-content">
                    <h3 class="card-title">Projects</h3>
                    {% for project in projects %}
                        <div class="project-item">
                            <h4 class="project-name">
                                {% if project.project_link %}
                                    <a href="{{ project.project_link }}" target="_blank" style="color:inherit;text-decoration:underline;">{{ project.title }}</a>
                                {% else %}
                                    {{ project.title }}
                                {% endif %}
                            </h4>
                            {% if project.description %}
                            <p class="project-desc">{{ project.description }}</p>
                            {% endif %}
                            {% if project.technologies.all %}
                            <div class="project-tech">
                                {% for tech in project.technologies.all %}
                                    <span class="tech-badge">{{ tech.name }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}
                            {% if project.image %}
                            <div style="margin-top:10px;">
                                <img src="{{ project.image.url }}" alt="{{ project.title }}" style="max-width:100%;border-radius:8px;">
                            </div>
                            {% endif %}
                        </div>
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p>No projects yet. Add some via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Certifications Section -->
            <div class="card certifications-card">
                <div class="card-content">
                    <h3 class="card-title">Certifications</h3>
                    {% for cert in certifications %}
                        <div class="cert-item">
                            <div class="cert-name">{{ cert.name }}</div>
                            <div class="cert-org">{{ cert.organization }}</div>
                        </div>
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p class="education-note">No certifications yet. Add them via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Technical Expertise Section -->
            <div class="card technical-expertise-card">
                <div class="card-content">
                    <h3 class="card-title">Technical Expertise</h3>
                    {% for expertise in technical_expertise %}
                        <div class="expertise-item">
                            <h4 class="expertise-category">{{ expertise.category }}</h4>
                            <p class="expertise-desc">{{ expertise.description }}</p>
                        </div>
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p class="education-note">No technical expertise entries yet. Add them via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="right-column">
            <!-- Skills Card -->
            <div class="card skills-card">
                <div class="card-content">
                    <h3 class="card-title">Skills</h3>

                    <div class="skills-subsection">
                        <h4 class="subsection-title">All Skills</h4>
                        <div class="skill-tags">
                            {% for skill in skills %}
                                <span class="skill-tag">{{ skill.name }}{% if skill.level %} — {{ skill.level|capfirst }}{% endif %}</span>
                            {% empty %}
                                <p>No skills yet. Add them via the admin panel.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Language Card -->
            <div class="card language-card">
                <div class="card-content">
                    <h3 class="card-title">Languages</h3>
                    <p class="language-text">{{ bio.languages|default:"English (Fluent) | Urdu (Native)" }}</p>
                </div>
            </div>

            <!-- Technical Achievements Section -->
            <div class="card achievements-card">
                <div class="card-content">
                    <h3 class="card-title">Technical Achievements</h3>
                    {% for achievement in technical_achievements %}
                        <div class="achievement-item">
                            <i class="{{ achievement.icon }} achievement-icon"></i>
                            <div class="achievement-text">
                                <strong>{{ achievement.title }}</strong>
                                <span>{{ achievement.description }}</span>
                            </div>
                        </div>
                        {% if not forloop.last %}<hr style="opacity:0.06;margin:15px 0;">{% endif %}
                    {% empty %}
                        <p class="education-note">No technical achievements yet. Add them via the admin panel.</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Interests Card -->
            <div class="card interest-card">
                <div class="card-content">
                    <h3 class="card-title">Interests</h3>
                    <p class="interest-text">{{ bio.interests|default:"Web Development • Mobile Apps • Open Source • Tech Trends • Coding Challenges • AI/ML • Cloud Computing" }}</p>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}
